{"ast":null,"code":"import { getHeroebyId } from \"./bases/08-import-export\";\nconst getImagePromesa = () => {\n  const promesa = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const randomNumber = Math.floor(Math.random() * 100) + 1;\n      if (randomNumber % 2 === 0) {\n        resolve(`https://picsum.photos/id/${randomNumber}/500`);\n      } else {\n        reject(new Error(`No se encontró una imagen con el número ${randomNumber}`));\n      }\n    }, 100);\n  });\n  return promesa;\n};\ngetImagePromesa().then(url => {\n  const img = document.createElement(\"img\");\n  console.log(url);\n  img.src = url;\n  document.body.append(img);\n}).catch(error => {\n  console.error(\"Error al cargar la imagen\", error);\n});\n\n// console.log(getImagePromesa());\n\n// Ahora Vamos a hacer el mismo Ejercicio pero usando async\n// Usando la palabra async, consigo que una función me devuelva una promesa\n\nconst getImageFunct = Id => {\n  const heroe = getHeroebyId(Id);\n  return heroe;\n};\nconsole.log(\"Heroe con Función Normal\", getImageFunct(3));\nconst getImageAsync = async Id => {\n  const heroe = getHeroebyId(Id);\n  return heroe;\n};\nconsole.log(\"Heroe con Función Async\");\ngetImageAsync(3).then(heroe => {\n  console.log(heroe);\n}).catch(error => {\n  console.error(\"Error al cargar la imagen\", error);\n});\n\n// await\n// Ahora Despues de ver como se puede conseguir que la respuesta de una Función sea una promesa\n// Vamos a ver que es esto del await\n\n// Con await, lo que vamos a conseguir es que podamos escribir código asincrono como si fuera código sincrono, con lo que simplificamos mucho la escritura del Código\n\n// Las Dos con diciones para poder usar await:\n//  - Debe usarse en funciones que devuelven una promesa\n//  - Debe estar en un bloque de código que está dentro de una función async\n\nconst apikey = \"qliUqRdzYPcj7pkqNG8NzCVOU0UgyQvz\";\nconst getImageAsyncAwait = async Id => {\n  // hay que tener en cuenta que fetch devuelve una promesa por definición\n  // await podemos usarlo solo en funciones que devuelven promesas\n  // Al poner await le estamos diciendo a la función que espere a que se resuelva la promesa\n  // Por tanto al obligar a que se espere a que se cumpla la promesa convertimos el código en Sincrono y podemos olvidarnos del .then .catch y .finally\n  // Para poder manjera y gestionar los errores es cesario el uso de try y catch\n\n  try {\n    const resp = await fetch(`https://api.giphy.com/v1/gifs/random?apikey=${apikey}`);\n    // La función .json() también devuelve una promesa, es por esto que puedo usar await para convertir el código en sincrono.\n    const {\n      data\n    } = await resp.json();\n    console.log(data.images.original.url);\n    const img2 = document.createElement(\"img\");\n    img2.src = data.images.original.url;\n    document.body.append(img2);\n  } catch (error) {\n    console.error(\"Error al cargar la imagen\", error);\n  }\n};\nconst peticionasyncawait = getImageAsyncAwait(3);\nconsole.log(peticionasyncawait);","map":{"version":3,"names":["getHeroebyId","getImagePromesa","promesa","Promise","resolve","reject","setTimeout","randomNumber","Math","floor","random","Error","then","url","img","document","createElement","console","log","src","body","append","catch","error","getImageFunct","Id","heroe","getImageAsync","apikey","getImageAsyncAwait","resp","fetch","data","json","images","original","img2","peticionasyncawait"],"sources":["/Users/josemanuelcepedayanez/Documents/02_Programacion/01_Curso_Programacion/20240829_DevTalles_React_Hook_MERN/02_Intro_JavaScript/intro-javascript/src/index.js"],"sourcesContent":["import { getHeroebyId } from \"./bases/08-import-export\";\nconst getImagePromesa = () => {\n  const promesa = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const randomNumber = Math.floor(Math.random() * 100) + 1;\n      if (randomNumber % 2 === 0) {\n        resolve(`https://picsum.photos/id/${randomNumber}/500`);\n      } else {\n        reject(\n          new Error(`No se encontró una imagen con el número ${randomNumber}`)\n        );\n      }\n    }, 100);\n  });\n  return promesa;\n};\n\ngetImagePromesa()\n  .then((url) => {\n    const img = document.createElement(\"img\");\n    console.log(url);\n    img.src = url;\n    document.body.append(img);\n  })\n  .catch((error) => {\n    console.error(\"Error al cargar la imagen\", error);\n  });\n\n// console.log(getImagePromesa());\n\n// Ahora Vamos a hacer el mismo Ejercicio pero usando async\n// Usando la palabra async, consigo que una función me devuelva una promesa\n\nconst getImageFunct = (Id) => {\n  const heroe = getHeroebyId(Id);\n  return heroe;\n};\n\nconsole.log(\"Heroe con Función Normal\", getImageFunct(3));\n\nconst getImageAsync = async (Id) => {\n  const heroe = getHeroebyId(Id);\n  return heroe;\n};\n\nconsole.log(\"Heroe con Función Async\");\ngetImageAsync(3)\n  .then((heroe) => {\n    console.log(heroe);\n  })\n  .catch((error) => {\n    console.error(\"Error al cargar la imagen\", error);\n  });\n\n// await\n// Ahora Despues de ver como se puede conseguir que la respuesta de una Función sea una promesa\n// Vamos a ver que es esto del await\n\n// Con await, lo que vamos a conseguir es que podamos escribir código asincrono como si fuera código sincrono, con lo que simplificamos mucho la escritura del Código\n\n// Las Dos con diciones para poder usar await:\n//  - Debe usarse en funciones que devuelven una promesa\n//  - Debe estar en un bloque de código que está dentro de una función async\n\nconst apikey = \"qliUqRdzYPcj7pkqNG8NzCVOU0UgyQvz\";\n\nconst getImageAsyncAwait = async (Id) => {\n  // hay que tener en cuenta que fetch devuelve una promesa por definición\n  // await podemos usarlo solo en funciones que devuelven promesas\n  // Al poner await le estamos diciendo a la función que espere a que se resuelva la promesa\n  // Por tanto al obligar a que se espere a que se cumpla la promesa convertimos el código en Sincrono y podemos olvidarnos del .then .catch y .finally\n  // Para poder manjera y gestionar los errores es cesario el uso de try y catch\n\n  try {\n    const resp = await fetch(\n      `https://api.giphy.com/v1/gifs/random?apikey=${apikey}`\n    );\n    // La función .json() también devuelve una promesa, es por esto que puedo usar await para convertir el código en sincrono.\n    const { data } = await resp.json();\n    console.log(data.images.original.url);\n    const img2 = document.createElement(\"img\");\n    img2.src = data.images.original.url;\n    document.body.append(img2);\n  } catch (error) {\n    console.error(\"Error al cargar la imagen\", error);\n  }\n};\n\nconst peticionasyncawait = getImageAsyncAwait(3);\n\nconsole.log(peticionasyncawait);\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,0BAA0B;AACvD,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAC5B,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IAC/CC,UAAU,CAAC,MAAM;MACf,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC;MACxD,IAAIH,YAAY,GAAG,CAAC,KAAK,CAAC,EAAE;QAC1BH,OAAO,CAAC,4BAA4BG,YAAY,MAAM,CAAC;MACzD,CAAC,MAAM;QACLF,MAAM,CACJ,IAAIM,KAAK,CAAC,2CAA2CJ,YAAY,EAAE,CACrE,CAAC;MACH;IACF,CAAC,EAAE,GAAG,CAAC;EACT,CAAC,CAAC;EACF,OAAOL,OAAO;AAChB,CAAC;AAEDD,eAAe,CAAC,CAAC,CACdW,IAAI,CAAEC,GAAG,IAAK;EACb,MAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACzCC,OAAO,CAACC,GAAG,CAACL,GAAG,CAAC;EAChBC,GAAG,CAACK,GAAG,GAAGN,GAAG;EACbE,QAAQ,CAACK,IAAI,CAACC,MAAM,CAACP,GAAG,CAAC;AAC3B,CAAC,CAAC,CACDQ,KAAK,CAAEC,KAAK,IAAK;EAChBN,OAAO,CAACM,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;AACnD,CAAC,CAAC;;AAEJ;;AAEA;AACA;;AAEA,MAAMC,aAAa,GAAIC,EAAE,IAAK;EAC5B,MAAMC,KAAK,GAAG1B,YAAY,CAACyB,EAAE,CAAC;EAC9B,OAAOC,KAAK;AACd,CAAC;AAEDT,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEM,aAAa,CAAC,CAAC,CAAC,CAAC;AAEzD,MAAMG,aAAa,GAAG,MAAOF,EAAE,IAAK;EAClC,MAAMC,KAAK,GAAG1B,YAAY,CAACyB,EAAE,CAAC;EAC9B,OAAOC,KAAK;AACd,CAAC;AAEDT,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;AACtCS,aAAa,CAAC,CAAC,CAAC,CACbf,IAAI,CAAEc,KAAK,IAAK;EACfT,OAAO,CAACC,GAAG,CAACQ,KAAK,CAAC;AACpB,CAAC,CAAC,CACDJ,KAAK,CAAEC,KAAK,IAAK;EAChBN,OAAO,CAACM,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;AACnD,CAAC,CAAC;;AAEJ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,MAAMK,MAAM,GAAG,kCAAkC;AAEjD,MAAMC,kBAAkB,GAAG,MAAOJ,EAAE,IAAK;EACvC;EACA;EACA;EACA;EACA;;EAEA,IAAI;IACF,MAAMK,IAAI,GAAG,MAAMC,KAAK,CACtB,+CAA+CH,MAAM,EACvD,CAAC;IACD;IACA,MAAM;MAAEI;IAAK,CAAC,GAAG,MAAMF,IAAI,CAACG,IAAI,CAAC,CAAC;IAClChB,OAAO,CAACC,GAAG,CAACc,IAAI,CAACE,MAAM,CAACC,QAAQ,CAACtB,GAAG,CAAC;IACrC,MAAMuB,IAAI,GAAGrB,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC1CoB,IAAI,CAACjB,GAAG,GAAGa,IAAI,CAACE,MAAM,CAACC,QAAQ,CAACtB,GAAG;IACnCE,QAAQ,CAACK,IAAI,CAACC,MAAM,CAACe,IAAI,CAAC;EAC5B,CAAC,CAAC,OAAOb,KAAK,EAAE;IACdN,OAAO,CAACM,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;EACnD;AACF,CAAC;AAED,MAAMc,kBAAkB,GAAGR,kBAAkB,CAAC,CAAC,CAAC;AAEhDZ,OAAO,CAACC,GAAG,CAACmB,kBAAkB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}